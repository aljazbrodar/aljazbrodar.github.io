"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[26400],{26428:(e,t,i)=>{function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.Z=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var i=d(t);if(i&&i.has(e))return i.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=o?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}r.default=e,i&&i.set(e,r);return r}(i(18898)),o=["title","size"];function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(d=function(e){return e?i:t})(e)}function a(e,t){if(null==e)return{};var i,n,r=function(e,t){if(null==e)return{};var i,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var s=r.forwardRef((function(e,t){var i=e.title,n=void 0===i?"Circle check":i,d=e.size,s=a(e,o),u=Object.assign({},s);return u.ref=t,"undefined"!=typeof d&&(u.width=d,u.height=d),r.createElement("svg",l({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},u),n?r.createElement("title",null,n):null,r.createElement("path",{d:"M12 1C5.9 1 1 5.9 1 12s4.9 11 11 11 11-4.9 11-11S18.1 1 12 1zm-1.5 16.1l-5.6-5.6L7 9.4l3.4 3.4 6.4-6.4 2.1 2.1-8.4 8.6z",fill:"currentColor"}))}));t.Z=s},3839:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(92354),r=i(87974),o=i(5147),d=i(26049),a=i(30330);const l=e=>{let{date:t}=e;const i=(0,o.Z)(),l=(0,d.p6)(i,t),s=(0,n.T)();return(0,d.Y3)(t)?(0,a.tZ)(r.W,{value:t,children:s("shared.todayDeliveryDate",{formattedDate:l})}):(0,d.Ei)(t)?(0,a.tZ)(r.W,{value:t,children:s("shared.tomorrowDeliveryDate",{formattedDate:l})}):(0,a.tZ)(r.W,{value:t,children:l})}},77680:(e,t,i)=>{i.d(t,{Z:()=>f});var n=i(72436),r=i(87974),o=i(3839),d=i(14962),a=i(92354),l=i(5147),s=i(26049),u=i(30330);const c=e=>{let{timeRange:t,date:i}=e;const n=(0,l.Z)(),o=(0,a.T)(),d=t.endTime>=1440,c=d?(0,s.i1)(n,t.startTime,i):(0,s.CJ)(n,t.startTime),h=d?(0,s.i1)(n,t.endTime,i):(0,s.CJ)(n,t.endTime);return(0,u.tZ)(r.W,{value:JSON.stringify(t),children:o("shared.deliveryTimeRange",{startTime:c,endTime:h})})};var h=i(11882),p=i(37740);const g=(0,n.zo)("div",(e=>{let{$theme:t}=e;return t.typography.ParagraphMedium})),v=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{background:t.colors.inputFill,height:"48px",width:"100%"}})),m=(0,n.zo)("div",(e=>{let{$theme:t}=e;return(0,h.Z)({height:48,$theme:t})}));function f(e){const t=(0,a.T)();return(0,u.BX)(u.HY,{children:[(0,u.tZ)(g,{children:(0,u.tZ)(d.Z,{source:e.deliveryTimes,loaded:i=>(0,u.tZ)(r.Z,{value:e.selectedDate||i.dates[0],onChange:e.onDateChange,ariaLabel:t("shared.delivery_details.select_delivery_date"),children:i.dates.map((e=>(0,u.tZ)(o.Z,{date:e},e)))}),error:()=>(0,u.tZ)(v,{}),loading:()=>(0,u.tZ)(m,{})})}),(0,u.tZ)(p.ZP,{$height:12}),(0,u.tZ)(g,{children:(0,u.tZ)(d.Z,{source:e.deliveryTimes,loaded:i=>(0,u.tZ)(r.Z,{value:JSON.stringify(e.selectedTimeRange)||"",onChange:e.onTimeRangeChange,ariaLabel:t("shared.delivery_details.select_delivery_time"),children:i.timeRanges[e.selectedDate||i.dates[0]].map((t=>(0,u.tZ)(c,{timeRange:t,date:e.selectedDate},JSON.stringify(t))))}),error:()=>(0,u.tZ)(v,{}),loading:()=>(0,u.tZ)(m,{})})})]})}},41899:(e,t,i)=>{i.d(t,{f:()=>r});var n=i(77862);const r=(0,i(72436).w1)(n.fe,(e=>{let{$theme:t,$removeMarginTop:i}=e;return{marginLeft:t.sizing.scale600,marginRight:t.sizing.scale600,marginTop:i?0:t.sizing.scale600,marginBottom:t.sizing.scale600,[t.mediaQuery.medium]:{marginLeft:t.sizing.scale800,marginRight:t.sizing.scale800,marginTop:i?0:t.sizing.scale800,marginBottom:t.sizing.scale800},color:t.colors.contentPrimary,isolation:"isolate"}}))},39334:(e,t,i)=>{i.d(t,{m:()=>s});var n=i(72436),r=i(68641),o=i(30330);const d=(0,n.zo)("div",(e=>{let{$theme:t,$sticky:i,$isStuck:n}=e;return{paddingLeft:t.sizing.scale600,paddingRight:t.sizing.scale600,paddingTop:t.sizing.scale600,paddingBottom:t.sizing.scale600,[t.mediaQuery.medium]:{paddingLeft:t.sizing.scale800,paddingRight:t.sizing.scale800,paddingTop:t.sizing.scale800,paddingBottom:t.sizing.scale800},...i?{background:t.colors.backgroundPrimary,position:"sticky",bottom:0,boxShadow:n?t.lighting.shallowAbove:void 0}:null}})),a=(0,n.zo)("div",{flexGrow:1}),l=(0,n.zo)("div",{height:"0px"}),s=(0,n.Le)(d,(e=>function(t){const{sticky:i=!0,pushToBottom:n=!0,children:d}=t,{sentinelHidden:s,sentinelRef:u}=(0,r.U)({detectionMode:r.P.below});return(0,o.BX)(o.HY,{children:[n?(0,o.tZ)(a,{}):null,i?(0,o.tZ)(l,{ref:u}):null,(0,o.tZ)(e,{$sticky:i,$isStuck:i&&s,children:d})]})}))},90029:(e,t,i)=>{i.d(t,{ay:()=>c,hQ:()=>u});var n=i(66209),r=i(64599),o=i(39140),d=i(56016),a=i(92354),l=i(30330);function s(e){const{overrides:t,...i}=e;return(0,l.tZ)(n.zx,{shape:r.X3.circle,kind:n.TO.monochromatic,...i,children:e.children})}function u(e){const t=(0,a.T)();return(0,l.tZ)(s,{"aria-label":t("close"),...e,children:(0,l.tZ)(d.Z,{size:16})})}function c(e){const t=(0,a.T)();return(0,l.tZ)(s,{"aria-label":t("back"),...e,children:(0,l.tZ)(o.Z,{size:16})})}},19726:(e,t,i)=>{i.d(t,{iQ:()=>s,rY:()=>l,xB:()=>m});var n=i(77808),r=i(72436),o=i(21888),d=i(62113),a=i(30330);const l={floatingOnceScrolled:"floatingOnceScrolled",floating:"floating",static:"static"},s=(0,r.zo)("div",(e=>{let{$floatingMode:t}=e;return t===l.floatingOnceScrolled||t===l.floating?{position:"sticky",top:0,zIndex:1}:{position:"relative"}})),u=(0,r.zo)("div",{position:"absolute",width:"100%"}),c=(0,r.zo)("div",(e=>{let{$isExpanded:t,$theme:i}=e;return{position:"absolute",top:0,bottom:0,width:"100%",display:"flex",alignItems:"center",backgroundColor:i.colors.backgroundPrimary,boxShadow:t?i.shadows.divider:void 0,transition:"transform 300ms ease, opacity 300ms ease",transform:t?"scale(1, 1)":"scale(1, 0)",transformOrigin:"top",opacity:t?1:0}})),h=(0,r.zo)("div",(e=>{let{$theme:t}=e;return{position:"relative",display:"grid",gridTemplateColumns:"1fr auto 1fr",alignItems:"center",justifyContent:"space-between",width:"100%",paddingLeft:t.sizing.scale300,paddingRight:t.sizing.scale300,paddingTop:t.sizing.scale300,paddingBottom:t.sizing.scale300,boxSizing:"border-box"}})),p=(0,r.zo)("div",(e=>{let{$isExpanded:t,$theme:i}=e;return{...i.typography.LabelLarge,flex:1,textAlign:"center",marginLeft:i.sizing.scale200,marginRight:i.sizing.scale200,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",transition:"transform 300ms ease, opacity 300ms ease",transform:t?"translateY(0)":"translateY(-".concat(i.sizing.scale100,")"),opacity:t?1:0}})),g=(0,r.zo)("div",(e=>{let{$theme:t}=e;return{justifySelf:"left"}})),v=(0,r.zo)("div",(e=>{let{$theme:t}=e;return{justifySelf:"right"}}));function m(e){const{canExpand:t=!0,floatingMode:i="floatingOnceScrolled",children:r}=e,{isModalTitleHidden:m}=(0,d.v)();let f;f=void 0!==e.isExpanded?e.isExpanded:m;const O=i===l.floating?u:n.Fragment,{embeddedFeatures:y}=(0,o.v)((e=>{let{embeddedFeatures:t}=e;return{embeddedFeatures:t}}));return y.xlbHeaderBridge?null:(0,a.tZ)(s,{$floatingMode:i,children:(0,a.BX)(O,{children:[t?(0,a.tZ)(c,{$isExpanded:f}):null,(0,a.tZ)(h,{children:r||(0,a.BX)(a.HY,{children:[(0,a.tZ)(g,{children:e.leftButton}),(0,a.tZ)(p,{$isExpanded:!!t&&f,children:e.title}),(0,a.tZ)(v,{children:e.rightButton})]})})]})})}},25301:(e,t,i)=>{i.d(t,{r:()=>a});var n=i(72436),r=i(62113),o=i(30330);const d=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.HeadingLarge,marginBottom:t.sizing.scale600}})),a=(0,n.Le)(d,(e=>function(t){const{modalTitleRef:i}=(0,r.v)();return(0,o.tZ)(e,{ref:i,children:t.children})}))},60262:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(2513),r=i(17966),o=i(26428),d=i(1406),a=i(30330);const l=()=>{const{enqueue:e}=(0,n.Ds)(),t=t=>{e({...t},r.t.short)};return{successSnackbar:e=>{t({...e,startEnhancer:()=>(0,a.tZ)(o.Z,{size:24})})},errorSnackbar:e=>{t({...e,startEnhancer:()=>(0,a.tZ)(d.Z,{size:24})})}}}},49622:(e,t,i)=>{i.d(t,{Ej:()=>l,PZ:()=>u,UH:()=>a,xB:()=>s,xM:()=>c});var n=i(77808),r=i(43738),o=i(92354),d=i(76448);const a=e=>{const t=null!=e?e:"",[i,r]=(0,n.useState)(t);return[i,r]},l=e=>{const t=null!=e?e:r.x.CREATOR_PAYS_ALL,[i,o]=(0,n.useState)(t);return[i,o]},s=e=>{var t;const i=(0,o.T)();let r="";const{user:a}=(0,d.Z)(),l=null===(t=a.data)||void 0===t?void 0:t.firstName;r=e||i("go.group_order_title",{firstName:l||""});const[s,u]=(0,n.useState)(r);return(0,n.useEffect)((()=>{e||u(i("go.group_order_title",{firstName:l||""}))}),[e,l]),[s,u]},u=e=>{const t=e,[i,r]=(0,n.useState)(t);return[i,r]},c=e=>{const[t,i]=(0,n.useState)(e);return[t,i]}},96262:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(35768),r=i(21888);const o=()=>{var e;return null!==(e=(0,r.v)((e=>{let{features:t}=e;return t}))[n.h6.is_gov3_enabled])&&void 0!==e&&e}},89018:(e,t,i)=>{i.d(t,{Mo:()=>$,Dy:()=>M});var n=i(77808),r=i(37356),o=i(17946),d=i(96557),a=i(26049),l=i(56706),s=i(5588),u=i(5142),c=i(28410);const h=e=>(0,c.W)(e),p=e=>{var t;let{deadlines:i,hhcoOptions:n,deliveryTime:r}=e;const o=(0,s.jT)(null==n||null===(t=n.handledHighCapacityOrderIntent)||void 0===t?void 0:t.hhcOrderSize),{leadTimeInMinutes:d,hhcoDeliveryHoursInfos:l}=(null==n?void 0:n.hhcoConfig)||{};let u=Boolean(d);const c=(0,s.rA)(r,l),h=new Date,p=(0,a.$m)(r.date)||new Date;(0,a.yn)(p,r.startTime);const g=(p-h)/6e4,v=new Set,m=o&&c,f=e=>e<g&&e>(d||0);for(let e=0;e<i.length;e++){const t=i[e],n=m&&f(t),r=!m&&t<g;(n||r)&&(t>d&&u&&(u=!1,v.add(d)),v.add(t))}const O=!v.size;return u&&(O||d<g)&&v.add(d),Array.from(v)};function g(e){const{deliveryTime:t,repeatOrderOptions:i,hhcoOptions:r,isRepeatGroupOrderEditing:a}=e,c=(0,o.Z)("getScheduledGroupOrderDeadlineOptionsV1"),[g,v]=(0,n.useState)({data:null,error:null,hasLoaded:!1,isLoading:!1}),[m,f]=(0,n.useState)({data:null,error:null,hasLoaded:!1,isLoading:!1}),{inGroupOrderV2XP:O}=(0,l.Z)();return(0,n.useEffect)((()=>{g.hasLoaded||g.isLoading||(O?(v({data:null,hasLoaded:!1,isLoading:!0,error:null}),c().then((e=>{v({data:e,hasLoaded:!0,isLoading:!1,error:null})})).catch((e=>{e instanceof d.F||v({data:null,hasLoaded:!0,isLoading:!1,error:e})}))):v({data:[],hasLoaded:!0,isLoading:!1,error:null}))}),[null==g?void 0:g.hasLoaded,null==g?void 0:g.isLoading,O,c]),(0,n.useEffect)((()=>{const e={data:(e=>{var t;let{deliveryTime:i,repeatOrderOptions:n,hhcoOptions:r,allDeadlines:o=[],isEditFlow:d=!1}=e;const a=o||[],l=Boolean(n),u=(0,s.jT)(null==r||null===(t=r.handledHighCapacityOrderIntent)||void 0===t?void 0:t.hhcOrderSize),c=l&&u,g=!d,{leadTimeInMinutes:v}=(null==r?void 0:r.hhcoConfig)||{};let m=Boolean(v);const f=null==n?void 0:n.firstOrderScheduledForDate;if(c&&d){const e=a.filter((e=>e>v));return m?[v,...e]:e}if(c&&g)return p({deadlines:a,hhcoOptions:r,deliveryTime:h(f)});if(l&&d)return o;if(l&&g){const e=(f-Date.now())/6e4;return a.filter((t=>t<e))}return null!=i&&i.scheduled?p({deadlines:a,hhcoOptions:r,deliveryTime:i}):o})({deliveryTime:t,repeatOrderOptions:i,hhcoOptions:r,allDeadlines:null==g?void 0:g.data,isEditFlow:a}),hasLoaded:null==g?void 0:g.hasLoaded,isLoading:null==g?void 0:g.isLoading,error:null==g?void 0:g.error};(0,u.$g)(e,m)||f(e)}),[t,i,r,null==g?void 0:g.data]),{deadlineOptions:m}}var v=i(49622),m=i(18898),f=i(32912),O=i(4010),y=i(69851),T=i(51916);function Z(e){const[t,i]=m.useState(null),n=(0,f.UO)(),{storeUuid:r,groupSizeOption:o}=(0,T.Z)(null==n?void 0:n.repeatOrderTemplateUuid),d=(0,y.Z)({encodedStoreUuid:n.encodedStoreUuid,shouldEvaluate:!r}),a=r||d,l=(0,O.Z)(a),{isRepeatGroupOrderEditing:u}=e;m.useEffect((()=>{if(l&&l.hasLoaded&&!l.isLoading&&l.data&&!t){var e;const t=(null==l||null===(e=l.data)||void 0===e?void 0:e.groupOrderSizes)||[];let n;o&&(n=o);const r=(e=>{let{groupOrderSizes:t,hhcOrderSize:i}=e;if(!Array.isArray(t))return null;const n=(0,s.vD)(t)||t[0];return i&&t.find((e=>(null==e?void 0:e.hhcOrderSize)==i))||n})({groupOrderSizes:t,hhcOrderSize:n});i(r)}}),[l,i,t,o]);const c=m.useCallback((e=>{u||e&&i(e)}),[i,u]);return{groupSizeOption:t,setGroupSizeOption:c}}var S=i(49802),b=i(56182),z=i(22079),L=i(15784),k=i(82673),C=i(72436),x=i(96262),D=i(30330);const w=(0,C.zo)("div",(e=>{let{$theme:t}=e;return{textAlign:"center",padding:t.sizing.scale600}}));const E={setRepeatOrderOptions:r.Z,setGroupSizeOption:r.Z,setStoreUuid:r.Z,setCartLockOptions:r.Z,storeUuid:null,cartLockOptions:null,deadlineOptions:z.E,repeatOrderOptions:null,isRepeatGroupOrderEditing:null,groupSizeOption:null,groupOrderDeadlineTooltipConfig:null},R=n.createContext(E),M=()=>{const e=n.useContext(R);if(null!==e)return e;throw Error("You may only use useGroupOrderContext as a descendant of GroupOrderProvider")};function $(e){var t;const[i,r]=n.useState(),{store:o}=(0,b.Z)(i),{deliveryTime:d}=(0,S.Z)(i),{isRepeatGroupOrderEditing:a}=(0,L.Z)(),[l,u]=(0,v.xM)(),[c,h]=(0,v.PZ)(),{groupSizeOption:p,setGroupSizeOption:f}=Z({isRepeatGroupOrderEditing:a}),O=null==o||null===(t=o.data)||void 0===t?void 0:t.hhcoConfig,y={handledHighCapacityOrderIntent:{hhcOrderSize:null==p?void 0:p.hhcOrderSize},hhcoConfig:O},T=function(e){var t,i;const[n,r]=m.useState(!1),o=m.useRef(!1),{store:d,storeUuid:a,hhcoOptions:l}=e,{deliveryTime:u}=(0,S.Z)(a),c=(0,x.Z)()&&!("asap"in u)&&u.scheduled,h=(0,s.jT)(null==l||null===(t=l.handledHighCapacityOrderIntent)||void 0===t?void 0:t.hhcOrderSize),p=h&&(0,s.rA)(u,null==l||null===(i=l.hhcoConfig)||void 0===i?void 0:i.hhcoDeliveryHoursInfos);return m.useEffect((()=>{d.hasLoaded&&(o.current||!p&&!c||(o.current=!0,r(!0)))}),[d,c,p,o,r]),m.useEffect((()=>{n&&setTimeout((()=>{r(!1)}),5e3)}),[n]),{isOpen:n,content:(0,D.tZ)(w,{children:h?(0,D.tZ)(k.v,{id:"go.hhco.order.deadline.tooltip.text"}):c?(0,D.tZ)(k.v,{id:"go.deadline.scheduled.tooltip.text"}):void 0}),showTooltip:()=>r(!0)}}({store:o,storeUuid:i,hhcoOptions:y}),{deadlineOptions:z}=g({deliveryTime:d,repeatOrderOptions:l,hhcoOptions:y,isRepeatGroupOrderEditing:a});return(0,D.tZ)(R.Provider,{value:{setRepeatOrderOptions:u,setGroupSizeOption:f,setStoreUuid:r,setCartLockOptions:h,repeatOrderOptions:l,isRepeatGroupOrderEditing:a,deadlineOptions:z,groupSizeOption:p,cartLockOptions:c,storeUuid:i,groupOrderDeadlineTooltipConfig:T},children:e.children})}},5142:(e,t,i)=>{function n(e){let t="",i="";if(e){var n,r;const u=(null==e||null===(n=e.displayName)||void 0===n?void 0:n.richTextElements)||[],c=(null==e||null===(r=e.subtitle)||void 0===r?void 0:r.richTextElements)||[];var o,d,a,l,s;if(u.length>0&&"text"===u[0].type)t=(null===(o=u[0].text)||void 0===o||null===(d=o.text)||void 0===d?void 0:d.text)||"";if(c.length>0&&"text"===c[0].type)i=(null===(a=c[0])||void 0===a||null===(l=a.text)||void 0===l||null===(s=l.text)||void 0===s?void 0:s.text)||""}return{displayName:t,subtitle:i}}i.d(t,{$g:()=>a,GI:()=>o,P_:()=>n,Sy:()=>r,uf:()=>d});const r=(e,t)=>{var i,n,r,o;return(null==e?void 0:e.autoSubmit)===(null==t?void 0:t.autoSubmit)&&(null==e||null===(i=e.deadline)||void 0===i?void 0:i.lockAtInMs)===(null==t||null===(n=t.deadline)||void 0===n?void 0:n.lockAtInMs)&&(null==e||null===(r=e.deadline)||void 0===r?void 0:r.lockBeforeScheduledInMinutes)===(null==t||null===(o=t.deadline)||void 0===o?void 0:o.lockBeforeScheduledInMinutes)},o=e=>{var t;let{deadlineOptions:i,cartLockOptions:n,repeatOrderOptions:r,deliveryTime:o,groupSizeOption:d}=e;const a=(null==i?void 0:i.data)||[],l=Boolean(a.length);if(!(i.hasLoaded&&!i.isLoading)||!l)return null;const s=null==n||null===(t=n.deadline)||void 0===t?void 0:t.lockBeforeScheduledInMinutes,u=Boolean(s),c=a.includes(s),h=(s||0)<a[0],p=!c||h,g=r||(null==o?void 0:o.scheduled);if(u&&p||!u&&g){var v,m;return{autoSubmit:!!(null!==(v=null==n?void 0:n.autoSubmit)&&void 0!==v?v:r),deadline:{lockBeforeScheduledInMinutes:null!==(m=a[0])&&void 0!==m?m:60}}}return null},d=e=>{const t=Math.round(10*e)/10,i=Boolean(t%1)?1:0;return t.toFixed(i)},a=(e=>(t,i)=>e(null==t?void 0:t.data,null==i?void 0:i.data)&&(null==t?void 0:t.hasLoaded)===(null==i?void 0:i.hasLoaded)&&(null==t?void 0:t.isLoading)===(null==i?void 0:i.isLoading)&&(null==t?void 0:t.error)===(null==i?void 0:i.error))(((e,t)=>{const i=e||[],n=t||[],r=i.length===n.length,o=i[0]===n[0]&&i[i.length-1]===n[n.length-1];return r&&o}))},28723:(e,t,i)=>{i.d(t,{Z:()=>R});var n=i(18898),r=i(82673),o=i(92354),d=i(32403),a=i(72436),l=i(37740),s=i(21888),u=i(86087),c=i(94034),h=i(49802),p=i(56182),g=i(45746),v=i(41899),m=i(13702),f=i(27739),O=i(19726),y=i(90029),T=i(25301),Z=i(39334),S=i(76691),b=i(77680),z=i(66209),L=i(15012),k=i(89018),C=i(26049),x=i(5147),D=i(30330);const w=(0,a.w1)(v.f,(e=>{let{$isMobile:t}=e;return t?{}:{width:"410px"}})),E=e=>{let{deliveryTimes:t}=e;const i=(0,x.Z)();if(t.data){const{dates:[e],timeRanges:n}=t.data,[{startTime:o}]=n[e],d=(0,C.CJ)(i,o),a=(0,C.p6)(i,e);return(0,D.tZ)(r.v,{id:"hhco.time_picker.modal.first.available.order.secondaryText.v2",data:{date:a,startTime:d}})}return null},R=e=>{var t,i;const{onClose:a,storeUuid:v,entryPoint:C,onDeliveryTimeUpdate:x}=e,{isMobile:R}=(0,s.v)((e=>{let{device:t}=e;return t})),M=(0,c.Z)(),$=(0,o.T)(),{store:P}=(0,p.Z)(v),{deliveryTime:_}=(0,h.Z)(e.storeUuid),B=(0,u.ZP)(),{repeatOrderOptions:I}=(0,k.Dy)(),U=n.useCallback((e=>{"asap"in e?a():x(e)}),[x,a]),{deliveryTimes:j,selectedDate:H,selectedTimeRange:G,onDateChange:A,onTimeRangeChange:F,onTimeFinalized:N}=(0,g.Z)(M,_,U,v,{useHandledHighCapacityOrderOverride:!0});n.useEffect((()=>{B("eats:hhco_scheduled_time_picker_modal",{source:C})}),[B,C]);const W=$(I?"hhco.time_picker.modal.first.available.order.title":"shared.scheduleOrder");return(0,D.BX)(m.u_,{size:R?f.NO.full:f.NO.auto,children:[(0,D.tZ)(O.xB,{leftButton:(0,D.tZ)(y.ay,{onClick:a}),title:W}),(0,D.BX)(w,{$isMobile:R,children:[(0,D.tZ)(T.r,{children:W}),(0,D.tZ)(l.ZP,{$height:12}),(0,D.tZ)(d.Yl,{children:I?(0,D.tZ)(E,{deliveryTimes:j}):(0,D.tZ)(L.ZP,{text:null==P||null===(t=P.data)||void 0===t||null===(i=t.hhcoConfig)||void 0===i?void 0:i.secondaryText})}),(0,D.tZ)(l.ZP,{$height:24}),(0,D.tZ)(b.Z,{deliveryTimes:j,selectedDate:H,onDateChange:A,selectedTimeRange:G,onTimeRangeChange:F})]}),(0,D.tZ)(Z.m,{children:(0,D.BX)(D.HY,{children:[(0,D.tZ)(S.V,{disabled:!j.hasLoaded,onClick:()=>{N()},children:(0,D.tZ)(r.v,{id:"hhco.time_picker.modal.primary.cta"})}),(0,D.tZ)(l.ZP,{$height:12}),(0,D.tZ)(S.V,{$kind:z.TO.secondary,onClick:a,children:I?(0,D.tZ)(r.v,{id:"shared.cancel"}):(0,D.tZ)(r.v,{id:"shared.close"})})]})})]})}},74279:(e,t,i)=>{i.d(t,{Z:()=>z});var n=i(18898),r=i(45528),o=i(92354),d=i(30778),a=i(33163),l=i(5588),s=i(89018),u=i(49802),c=i(4010),h=i(60262),p=i(24707),g=i(26049),v=i(86087),m=i(26428),f=i(2513),O=i(17966),y=i(5147),T=i(30330);var Z=i(73707),S=i(38370),b=i(28410);function z(e){var t,i,z;let{entryPoint:L,storeUuid:k,showSnackbarOnUpdate:C}=e;const[x,D]=n.useState(!1),{groupSizeOption:w,setGroupSizeOption:E,repeatOrderOptions:R,setRepeatOrderOptions:M,isRepeatGroupOrderEditing:$,groupOrderDeadlineTooltipConfig:P}=(0,s.Dy)(),_=(0,d.I0)(),B=(0,o.T)(),I=(0,r.T)(),U=(0,Z.Z)(),j=(0,v.ZP)(),H=(0,c.Z)(k),{errorSnackbar:G}=(0,h.Z)(),{deliveryTime:A,diningMode:F}=(0,u.Z)(k),{showScheduledSnackbar:N}=function(){const e=(0,o.T)(),{enqueue:t}=(0,f.Ds)(),i=(0,y.Z)(),{repeatOrderOptions:r}=(0,s.Dy)();return{showScheduledSnackbar:n.useCallback(((n,o)=>{let d;if(n&&n.date){const t={date:(0,g.p6)(i,n.date),startTime:(0,g.CJ)(i,n.startTime),endTime:(0,g.CJ)(i,n.endTime)};d=e("PICKUP"===o?r?"go.hhco.rgo.order.scheduled.snackbar.text.pickup":"go.hhco.order.scheduled.snackbar.text.pickup":r?"go.hhco.rgo.order.scheduled.snackbar.text.delivery":"go.hhco.order.scheduled.snackbar.text.delivery",t)}else d=e("component.scheduledOrderConfirmation.title");t({message:d,startEnhancer:e=>{let{size:t}=e;return(0,T.tZ)(m.Z,{size:t})}},O.t.medium)}),[t,e,i,r])}}(),W=null==H||null===(t=H.data)||void 0===t||null===(i=t.hhcoConfig)||void 0===i?void 0:i.hhcoDeliveryHoursInfos,Y=null==H||null===(z=H.data)||void 0===z?void 0:z.groupOrderSizes,J=L==p.CI.STORE,X=L==p.CI.GROUP_ORDER_CREATE;n.useEffect((()=>{if($)D(!1);else if((0,l.jT)(null==w?void 0:w.hhcOrderSize)){const e=R?(0,l.rA)((0,b.W)(R.firstOrderScheduledForDate),W):(0,l.rA)(A,W);e?D(!1):e||D(!0)}}),[A,w,R,W,D,$]);return{hhcoDeliveryTimeModalSurfaced:x,onDismissTimepicker:()=>{j("eats:e4b_hhco_timepicker_defer",{source:L}),D(!1),J?U((0,S.C45)(I)):X&&R&&(E(null==Y?void 0:Y[0]),G({message:B("go.hhco.settings.snackbar.error.message")}))},onDeliveryTimeUpdate:e=>{var t;const i=null!==(t=(0,g.$m)(e.date))&&void 0!==t?t:new Date,n=e.startTime||0;(0,g.yn)(i,n),j("eats:e4b_hhco_timepicker_rescheduled",{source:L,hhcoScheduledTime:{timePicked:i.getTime()}}),J?(e=>{_((0,a.A0)(k,{storeScheduledTime:e})),U((0,S.C45)(I))})(e):X&&((e,t)=>{R?M({...R,firstOrderScheduledForDate:t}):_((0,a.A0)(k,{storeScheduledTime:e}))})(e,i),C&&(N(e,F),P&&P.showTooltip()),D(!1)}}}},45746:(e,t,i)=>{i.d(t,{Z:()=>p});var n=i(77808),r=i(17946),o=i(96557),d=i(29482),a=i(61449),l=i(30778),s=i(68587),u=i(56182);function c(e,t){return e.date&&t.timeRanges[e.date]?e.date:t.dates[0]}function h(e,t,i){return e===t.date&&i.find((e=>t.scheduled&&e.startTime===t.startTime&&e.endTime===t.endTime))||i[0]}function p(e,t,i,p){var g,v,m;let f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const O=(0,r.Z)("getDeliveryTimesV2"),y=(0,l.I0)(),[T,Z]=(0,n.useState)({data:null,error:null,hasLoaded:!1,isLoading:!1}),[S,b]=(0,n.useState)(),[z,L]=(0,n.useState)(),{store:k,shouldGetStore:C,getStore:x}=(0,u.Z)(p);(0,n.useEffect)((()=>{C&&x()}),[C,x]);const D=null===(g=k.data)||void 0===g?void 0:g.adaptedDeliveryHoursInfos,w=null!=f&&f.useHandledHighCapacityOrderOverride&&(null===(v=k.data)||void 0===v||null===(m=v.hhcoConfig)||void 0===m?void 0:m.hhcoDeliveryHoursInfos)||D;(0,n.useEffect)((()=>{if(!T.hasLoaded&&!T.isLoading&&k.hasLoaded&&!k.isLoading&&w&&w.scheduledTimesAvailable){Z({data:w,hasLoaded:!0,isLoading:!1,error:null});const e=c(t,w);b(e),L(h(e,t,w.timeRanges[e]))}else p||T.hasLoaded||T.isLoading||O({timezone:(0,a.Z)(),location:e}).then((e=>{const i=c(t,e);Z({data:e,hasLoaded:!0,isLoading:!1,error:null}),b(i),L(h(i,t,e.timeRanges[i]))})).catch((e=>{e instanceof o.F||Z({data:null,hasLoaded:!0,isLoading:!1,error:e})}))}),[T,e,S,t,O,w,k,p]);const E=e=>{const t=e.target.value;if(b(t),z&&T.data){const e=T.data.timeRanges[t],i=e.find((e=>e.startTime===z.startTime&&e.endTime===z.endTime))||e[0];L({startTime:i.startTime,startTimeMs:i.startTimeMs,endTime:i.endTime})}},R=e=>{try{const{startTime:t,startTimeMs:i,endTime:n}=JSON.parse(e.target.value);L({startTime:t,startTimeMs:i,endTime:n})}catch(e){}},M=()=>{if(S&&z){const e={scheduled:!0,date:S,startTime:z.startTime,startTimeMs:z.startTimeMs,endTime:z.endTime};(0,d.O)(t,e)||y((0,s.hW)()),i(e)}},$=()=>{t.asap||y((0,s.hW)()),i({asap:!0})};return{deliveryTimes:T,selectedDate:S,selectedTimeRange:z,onDateChange:E,onTimeRangeChange:R,onTimeFinalized:M,onTimeAsap:$,store:k}}},61449:(e,t,i)=>{i.d(t,{Z:()=>n});const n=()=>{try{const e=Intl.DateTimeFormat().resolvedOptions().timeZone;if(e)return e}catch(e){return"Etc/Unknown"}return"Etc/Unknown"}}}]);