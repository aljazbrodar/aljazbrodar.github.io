"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[51916],{53839:(e,t,r)=>{r.d(t,{OG:()=>a,k5:()=>E});Object.freeze({UNKNOWN:"UNKNOWN",TABLET:"TABLET",MOBILE:"MOBILE",WEB:"WEB",RESERVED_4:"RESERVED_4",RESERVED_5:"RESERVED_5",RESERVED_6:"RESERVED_6",RESERVED_7:"RESERVED_7",RESERVED_8:"RESERVED_8",RESERVED_9:"RESERVED_9",RESERVED_10:"RESERVED_10"});const E=Object.freeze({DELIVERY:"DELIVERY",PICKUP:"PICKUP",DINE_IN:"DINE_IN",DELIVERY_API:"DELIVERY_API",SHIPMENT:"SHIPMENT",RESERVED_5:"RESERVED_5",RESERVED_6:"RESERVED_6",RESERVED_7:"RESERVED_7",RESERVED_8:"RESERVED_8",RESERVED_9:"RESERVED_9"}),a=(Object.freeze({DELIVERY:"DELIVERY",DELIVERY_THIRD_PARTY:"DELIVERY_THIRD_PARTY",DELIVERY_THIRD_PARTY_FALLBACK:"DELIVERY_THIRD_PARTY_FALLBACK",DINE_IN:"DINE_IN",PICKUP:"PICKUP",DELIVERY_API:"DELIVERY_API",DELIVERY_OVER_THE_TOP:"DELIVERY_OVER_THE_TOP",DELIVERY_OVER_THE_TOP_ORDER_AHEAD:"DELIVERY_OVER_THE_TOP_ORDER_AHEAD",UNKNOWN:"UNKNOWN",SHIPMENT:"SHIPMENT",RESERVED_10:"RESERVED_10",RESERVED_11:"RESERVED_11",RESERVED_12:"RESERVED_12"}),Object.freeze({PREDICTION:"PREDICTION",FALL_BACK:"FALL_BACK"}),Object.freeze({BUSINESS_LOCATION_CATEGORY:"BUSINESS_LOCATION_CATEGORY",BUSINESS_LOCATION_SEARCHABLE_TAG:"BUSINESS_LOCATION_SEARCHABLE_TAG",BUSINESS_LOCATION_INTERNAL_TAG:"BUSINESS_LOCATION_INTERNAL_TAG",BUSINESS_LOCATION_PARENT_CHAIN:"BUSINESS_LOCATION_PARENT_CHAIN",ITEM_CUISINE:"ITEM_CUISINE",ITEM_MEAL_TYPE:"ITEM_MEAL_TYPE",ITEM_PROTEIN_TYPE:"ITEM_PROTEIN_TYPE",ITEM_CUSTOMIZATION_TAG:"ITEM_CUSTOMIZATION_TAG",ITEM_CUSTOMIZATION_OPTION_TAG:"ITEM_CUSTOMIZATION_OPTION_TAG",ITEM_DIETARY_INFO:"ITEM_DIETARY_INFO",ITEM_PROMOTED:"ITEM_PROMOTED",RESERVED_12:"RESERVED_12",RESERVED_13:"RESERVED_13",RESERVED_14:"RESERVED_14",RESERVED_15:"RESERVED_15",RESERVED_16:"RESERVED_16",RESERVED_17:"RESERVED_17",RESERVED_18:"RESERVED_18"}),Object.freeze({AUTOCOMPLETE:"AUTOCOMPLETE",PIN_ADJUST:"PIN_ADJUST",MANUAL:"MANUAL",RESERVED_0:"RESERVED_0",RESERVED_1:"RESERVED_1"}),Object.freeze({CAROUSEL_PROMO:"CAROUSEL_PROMO",FULFILLMENT_ISSUE:"FULFILLMENT_ISSUE",NO_RUSH_DELIVERY:"NO_RUSH_DELIVERY",BANDWAGON_COUNTDOWN_V2:"BANDWAGON_COUNTDOWN_V2",ADD_ON_OFFER:"ADD_ON_OFFER",RESERVED_6:"RESERVED_6",RESERVED_7:"RESERVED_7",RESERVED_8:"RESERVED_8",UNKNOWN:"UNKNOWN"}),Object.freeze({ASAP:"ASAP",QUICKEATS_NO_GUARANTEE:"QUICKEATS_NO_GUARANTEE",BANDWAGON:"BANDWAGON",EARLYBIRD:"EARLYBIRD",NO_RUSH_DELIVERY:"NO_RUSH_DELIVERY",PREMIUM_DELIVERY:"PREMIUM_DELIVERY",MULTI_RESTAURANT_ORDERING:"MULTI_RESTAURANT_ORDERING",ETD_SURGE:"ETD_SURGE",BANDWAGON_PREVIEW:"BANDWAGON_PREVIEW",MULTI_RESTAURANT_ORDERING_ADD_ON:"MULTI_RESTAURANT_ORDERING_ADD_ON"}),Object.freeze({MONDAY:"MONDAY",TUESDAY:"TUESDAY",WEDNESDAY:"WEDNESDAY",THURSDAY:"THURSDAY",FRIDAY:"FRIDAY",SATURDAY:"SATURDAY",SUNDAY:"SUNDAY"}));Object.freeze({GLOBAL:"GLOBAL",ORGANIZATION:"ORGANIZATION",STORE:"STORE",PLACEHOLDER_0:"PLACEHOLDER_0",PLACEHOLDER_1:"PLACEHOLDER_1",PLACEHOLDER_2:"PLACEHOLDER_2",PLACEHOLDER_3:"PLACEHOLDER_3"})},36216:(e,t,r)=>{r.d(t,{$:()=>A,e:()=>s});var E=r(82673),a=r(72436),_=r(5147),o=r(32403),d=r(50953),n=r(81152),i=r(29732),R=r(53839),l=r(26049),O=r(30330);const D=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",alignItems:"center",justifyContent:"center",width:t.sizing.scale1600}})),T=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",background:t.colors.backgroundSecondary,borderRadius:t.sizing.scale200,padding:"".concat(t.sizing.scale600," 0"),marginBottom:t.sizing.scale700}})),y=(e,t)=>new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,t).getTime();const s=e=>{var t,r,E,a,_,o,d,n;const i=new Date(null!==(t=null===(r=e.startDate)||void 0===r?void 0:r.replace(/-/g,"/"))&&void 0!==t?t:""),R=null!=e&&e.endDate?new Date(null!==(E=null===(a=e.endDate)||void 0===a?void 0:a.replace(/-/g,"/"))&&void 0!==E?E:""):null;return{startDate:i,startTime:y(i,null!==(_=null===(o=e.deliveryTimeRange)||void 0===o?void 0:o.startTime)&&void 0!==_?_:0),endDate:R,endTime:y(i,null!==(d=null===(n=e.deliveryTimeRange)||void 0===n?void 0:n.endTime)&&void 0!==d?d:0)}};function A(e){let{repeatSchedule:t}=e;const r=function(e){var t;const r=(0,i.o)(),{frequency:E}=e,a=new Date(e.startDate||""),_=Object.keys(R.OG)[(a.getDay()+6)%7],o=new Date(a.getFullYear(),a.getMonth()+1,0).getDate()-a.getDate()<7?i.t.LAST:Object.keys(i.t)[Math.floor(a.getDate()/7)];return(null===(t=r.find((e=>!(e.id!==E||e.weekPosition&&e.weekPosition!==o||e.day&&e.day!==_))))||void 0===t?void 0:t.label)||null}(t),{startDate:a,endDate:y,startTime:A,endTime:S}=s(t),N=(0,_.Z)(),I=e=>e.toLocaleDateString(N,{year:"numeric",month:"short",day:"numeric"});return(0,O.BX)(T,{children:[(0,O.tZ)(D,{children:(0,O.tZ)(d.Z,{size:24})}),(0,O.BX)("div",{style:{},children:[(0,O.tZ)(o.Uc,{marginBottom:"4px",children:r}),(0,O.tZ)(o.aM,{color:"contentSecondary",children:(0,O.tZ)(E.v,{id:"eats.repeat_order.format.start_end_time",data:{startTime:(0,l.mr)(N,A),endTime:(0,l.mr)(N,S)}})}),(0,O.BX)(o.aM,{color:"contentSecondary",children:[(0,O.tZ)(E.v,{id:"go.join_group_order_repeat_schedule_start_date",data:{startDate:I(a)}}),(0,O.tZ)(n.Z,{spaces:2}),y?(0,O.tZ)(E.v,{id:"go.join_group_order_repeat_schedule_end_date",data:{endDate:I(y)}}):(0,O.tZ)(E.v,{id:"repeat_group_order.no_end_date"})]})]})]})}},29732:(e,t,r)=>{r.d(t,{o:()=>d,t:()=>o});var E=r(92354),a=r(53839),_=r(41315);const o=Object.freeze({FIRST:"FIRST",SECOND:"SECOND",THIRD:"THIRD",FORTH:"FORTH",LAST:"LAST"});function d(){const e=(0,E.T)();return[{id:_.Kk.DAILY,label:e("repeat_group_order.daily_frequency")},{id:_.Kk.WEEKDAY,label:e("repeat_group_order.week_day_frequency")},{id:_.Kk.WEEKLY,label:e("eats.repeat_order.frequency.weekly_on_sunday"),day:a.OG.SUNDAY},{id:_.Kk.WEEKLY,label:e("eats.repeat_order.frequency.weekly_on_monday"),day:a.OG.MONDAY},{id:_.Kk.WEEKLY,label:e("eats.repeat_order.frequency.weekly_on_tuesday"),day:a.OG.TUESDAY},{id:_.Kk.WEEKLY,label:e("eats.repeat_order.frequency.weekly_on_wednesday"),day:a.OG.WEDNESDAY},{id:_.Kk.WEEKLY,label:e("eats.repeat_order.frequency.weekly_on_thursday"),day:a.OG.THURSDAY},{id:_.Kk.WEEKLY,label:e("eats.repeat_order.frequency.weekly_on_friday"),day:a.OG.FRIDAY},{id:_.Kk.WEEKLY,label:e("eats.repeat_order.frequency.weekly_on_saturday"),day:a.OG.SATURDAY},{id:_.Kk.BIWEEKLY,label:e("eats.repeat_order.frequency.every_other_sunday"),day:a.OG.SUNDAY},{id:_.Kk.BIWEEKLY,label:e("eats.repeat_order.frequency.every_other_monday"),day:a.OG.MONDAY},{id:_.Kk.BIWEEKLY,label:e("eats.repeat_order.frequency.every_other_tuesday"),day:a.OG.TUESDAY},{id:_.Kk.BIWEEKLY,label:e("eats.repeat_order.frequency.every_other_wednesday"),day:a.OG.WEDNESDAY},{id:_.Kk.BIWEEKLY,label:e("eats.repeat_order.frequency.every_other_thursday"),day:a.OG.THURSDAY},{id:_.Kk.BIWEEKLY,label:e("eats.repeat_order.frequency.every_other_friday"),day:a.OG.FRIDAY},{id:_.Kk.BIWEEKLY,label:e("eats.repeat_order.frequency.every_other_saturday"),day:a.OG.SATURDAY},{id:_.Kk.MONTHLY,label:e("eats.repeat_order.frequency.monthly_on_first_sunday"),weekPosition:o.FIRST,day:a.OG.SUNDAY},{id:_.Kk.MONTHLY,label:e("eats.repeat_order.frequency.monthly_on_first_monday"),weekPosition:o.FIRST,day:a.OG.MONDAY},{id:_.Kk.MONTHLY,label:e("eats.repeat_order.frequency.monthly_on_first_tuesday"),weekPosition:o.FIRST,day:a.OG.TUESDAY},{id:_.Kk.MONTHLY,label:e("eats.repeat_order.frequency.monthly_on_first_wednesday"),weekPosition:o.FIRST,day:a.OG.WEDNESDAY},{id:_.Kk.MONTHLY,label:e("eats.repeat_order.frequency.monthly_on_first_thursday"),weekPosition:o.FIRST,day:a.OG.THURSDAY},{id:_.Kk.MONTHLY,label:e("eats.repeat_order.frequency.monthly_on_first_friday"),weekPosition:o.FIRST,day:a.OG.FRIDAY},{id:_.Kk.MONTHLY,label:e("eats.repeat_order.frequency.monthly_on_first_saturday"),weekPosition:o.FIRST,day:a.OG.SATURDAY},{id:_.Kk.MONTHLY,label:e("eats.repeat_order.frequency.monthly_on_second_sunday"),weekPosition:o.SECOND,day:a.OG.SUNDAY},{id:_.Kk.MONTHLY,label:e("eats.repeat_order.frequency.monthly_on_second_monday"),weekPosition:o.SECOND,day:a.OG.MONDAY},{id:_.Kk.MONTHLY,label:e("eats.repeat_order.frequency.monthly_on_second_tuesday"),weekPosition:o.SECOND,day:a.OG.TUESDAY},{id:_.Kk.MONTHLY,label:e("eats.repeat_order.frequency.monthly_on_second_wednesday"),weekPosition:o.SECOND,day:a.OG.WEDNESDAY},{id:_.Kk.MONTHLY,label:e("eats.repeat_order.frequency.monthly_on_second_thursday"),weekPosition:o.SECOND,day:a.OG.THURSDAY},{id:_.Kk.MONTHLY,label:e("eats.repeat_order.frequency.monthly_on_second_friday"),weekPosition:o.SECOND,day:a.OG.FRIDAY},{id:_.Kk.MONTHLY,label:e("eats.repeat_order.frequency.monthly_on_second_saturday"),weekPosition:o.SECOND,day:a.OG.SATURDAY},{id:_.Kk.MONTHLY,label:e("eats.repeat_order.frequency.monthly_on_third_sunday"),weekPosition:o.THIRD,day:a.OG.SUNDAY},{id:_.Kk.MONTHLY,label:e("eats.repeat_order.frequency.monthly_on_third_monday"),weekPosition:o.THIRD,day:a.OG.MONDAY},{id:_.Kk.MONTHLY,label:e("eats.repeat_order.frequency.monthly_on_third_tuesday"),weekPosition:o.THIRD,day:a.OG.TUESDAY},{id:_.Kk.MONTHLY,label:e("eats.repeat_order.frequency.monthly_on_third_wednesday"),weekPosition:o.THIRD,day:a.OG.WEDNESDAY},{id:_.Kk.MONTHLY,label:e("eats.repeat_order.frequency.monthly_on_third_thursday"),weekPosition:o.THIRD,day:a.OG.THURSDAY},{id:_.Kk.MONTHLY,label:e("eats.repeat_order.frequency.monthly_on_third_friday"),weekPosition:o.THIRD,day:a.OG.FRIDAY},{id:_.Kk.MONTHLY,label:e("eats.repeat_order.frequency.monthly_on_third_saturday"),weekPosition:o.THIRD,day:a.OG.SATURDAY},{id:_.Kk.MONTHLY,label:e("eats.repeat_order.frequency.monthly_on_forth_sunday"),weekPosition:o.FORTH,day:a.OG.SUNDAY},{id:_.Kk.MONTHLY,label:e("eats.repeat_order.frequency.monthly_on_forth_monday"),weekPosition:o.FORTH,day:a.OG.MONDAY},{id:_.Kk.MONTHLY,label:e("eats.repeat_order.frequency.monthly_on_forth_tuesday"),weekPosition:o.FORTH,day:a.OG.TUESDAY},{id:_.Kk.MONTHLY,label:e("eats.repeat_order.frequency.monthly_on_forth_wednesday"),weekPosition:o.FORTH,day:a.OG.WEDNESDAY},{id:_.Kk.MONTHLY,label:e("eats.repeat_order.frequency.monthly_on_forth_thursday"),weekPosition:o.FORTH,day:a.OG.THURSDAY},{id:_.Kk.MONTHLY,label:e("eats.repeat_order.frequency.monthly_on_forth_friday"),weekPosition:o.FORTH,day:a.OG.FRIDAY},{id:_.Kk.MONTHLY,label:e("eats.repeat_order.frequency.monthly_on_forth_saturday"),weekPosition:o.FORTH,day:a.OG.SATURDAY},{id:_.Kk.MONTHLY,label:e("eats.repeat_order.frequency.monthly_on_last_sunday"),weekPosition:o.LAST,day:a.OG.SUNDAY},{id:_.Kk.MONTHLY,label:e("eats.repeat_order.frequency.monthly_on_last_monday"),weekPosition:o.LAST,day:a.OG.MONDAY},{id:_.Kk.MONTHLY,label:e("eats.repeat_order.frequency.monthly_on_last_tuesday"),weekPosition:o.LAST,day:a.OG.TUESDAY},{id:_.Kk.MONTHLY,label:e("eats.repeat_order.frequency.monthly_on_last_wednesday"),weekPosition:o.LAST,day:a.OG.WEDNESDAY},{id:_.Kk.MONTHLY,label:e("eats.repeat_order.frequency.monthly_on_last_thursday"),weekPosition:o.LAST,day:a.OG.THURSDAY},{id:_.Kk.MONTHLY,label:e("eats.repeat_order.frequency.monthly_on_last_friday"),weekPosition:o.LAST,day:a.OG.FRIDAY},{id:_.Kk.MONTHLY,label:e("eats.repeat_order.frequency.monthly_on_last_saturday"),weekPosition:o.LAST,day:a.OG.SATURDAY}]}},51916:(e,t,r)=>{r.d(t,{H:()=>R,Z:()=>l});var E=r(77808),a=r(74434),_=r(37424),o=r(47348),d=r(43738),n=r(15784),i=r(36216);const R=["repeatOrderTemplateMetadata"],l=e=>{var t,r,l,O,D;const T=(0,E.useContext)(_.GM),y=(0,_.G2)(o.U4).from(T),{isRepeatGroupOrderEditing:s}=(0,n.Z)(),A=(0,a.useQuery)({queryKey:[...R,e],queryFn:async()=>{var t;const r=await y.request("getDraftOrderByUuidV2",{draftOrderUUID:e});if("REPEAT_ORDER_TEMPLATE_STATE"!==(null===(t=r.draftOrder)||void 0===t?void 0:t.state))throw new Error("Not a repeat order");return r},enabled:Boolean(e)}),S=null===(t=A.data)||void 0===t?void 0:t.draftOrder,N=null!==(r=null==S||null===(l=S.shoppingCart)||void 0===l?void 0:l.groupedItems)&&void 0!==r?r:[],I=N.filter((e=>!e.isCreator)),u=(null==S?void 0:S.storeUuid)||"",L=!1===(null==S?void 0:S.shoppingCart.isOwner),Y=null==S?void 0:S.shoppingCart.isOwner,c=null==S?void 0:S.cartLockOptions,k=null!=S&&null!==(O=S.spendingLimitAmount)&&void 0!==O&&O.amount?(S.spendingLimitAmount.amount/100).toString():"",p=null==S?void 0:S.displayName,f=(null==S?void 0:S.billSplitOption)||d.x.CREATOR_PAYS_ALL,U=null==S?void 0:S.repeatSchedule;return{query:A,isRepeatOrderParticipant:L,isRepeatOrderCreator:Y,groupedItems:N,groupedItemsGuests:I,storeUuid:u,billSplitOption:f,cartLockOptions:c,spendingLimit:k,displayName:p,repeatSchedule:U,repeatOrderOptions:U&&s?(e=>{const{startTime:t,endDate:r}=(0,i.e)(e);return{firstOrderScheduledForDate:new Date(t),frequency:null==e?void 0:e.frequency,endsOnDate:r?new Date(r):null}})(U):null,groupSizeOption:null==S||null===(D=S.handledHighCapacityOrderMetadata)||void 0===D?void 0:D.hhcOrderSize}}}}]);