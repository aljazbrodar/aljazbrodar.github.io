(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[41362],{83789:(e,s,n)=>{"use strict";n.d(s,{DC:()=>b,Eb:()=>f,Nj:()=>r,XC:()=>y,b6:()=>v,b_:()=>p,dR:()=>c,jm:()=>P,og:()=>C,oz:()=>m});var i=n(82673),a=n(39069),t=n(77630),l=n(25929),u=n(30330);function o(e){return!e||e.type===a.Hu.Personal}function d(e){return e.map((e=>e.amountString)).join(", ")}function r(e){if(!e)return null;const s={text:"",displayable:null};switch((e.tokenType||"").toLowerCase()){case"uber_test":case"derivative":case"paytm":s.text=e.cardType||"";break;case"paypal":s.displayable=(0,u.tZ)(i.v,{id:"shared.paypal"});break;case"cash":s.displayable=(0,u.tZ)(i.v,{id:"shared.cash"});break;case"stored_value":s.displayable=(0,u.tZ)(i.v,{id:"shared.uber_cash"});break;case"upi":s.displayable=(0,u.tZ)(i.v,{id:"shared.upi"});break;case"paypay":s.displayable=(0,u.tZ)(i.v,{id:"shared.paypay"});break;case"braintree":case"zaakpay":case"bancontact":s.text=function(e){const{cardType:s,cardNumber:n}=e,i=s?"".concat(s," - "):"•••• ";return"".concat(i).concat(n||"")}(e);break;case"apple_pay_display":s.text="Apple Pay";break;default:s.text=e.accountName||""}return s}const c=(e,s,n)=>{var a,t,o;if(!e)return null;const d=(0,u.tZ)("div",{children:null==e?void 0:e.name});if(!(null!=e&&null!==(a=e.components)&&void 0!==a&&a.periodicCapComponent||null!=e&&null!==(t=e.components)&&void 0!==t&&t.perTripCapComponent))return{displayable:n?(0,u.tZ)("div",{children:e.description}):(0,u.tZ)(i.v,{id:"checkout.business_payments_balance.billed_to_company"}),text:""};if(null!==(o=e.components)&&void 0!==o&&o.periodicCapComponent){var r;const{amount:n,usage:a,currencyCode:t}=(null===(r=e.validationExtra)||void 0===r?void 0:r.periodicCapBalance)||{},o="number"==typeof n&&"number"==typeof a?(0,l.xG)(s,t||"",100*(n-a)):null;var c,p;if(o)return{displayable:{DAILY:(0,u.tZ)(i.v,{id:"checkout.business_payments_balance.daily",data:{balance:o}}),WEEKLY:(0,u.tZ)(i.v,{id:"checkout.business_payments_balance.weekly",data:{balance:o}}),MONTHLY:(0,u.tZ)(i.v,{id:"checkout.business_payments_balance.monthly",data:{balance:o}}),DEFAULT:d}[(null===(c=e.components)||void 0===c||null===(p=c.periodicCapComponent)||void 0===p?void 0:p.period)||"DEFAULT"],text:""}}else{var y;const{amount:n,currencyCode:a}=(null===(y=e.validationExtra)||void 0===y?void 0:y.perTripCapBalance)||{},t="number"!=typeof n?"":(0,l.xG)(s,a||"",100*n);if(t)return{displayable:(0,u.tZ)(i.v,{id:"checkout.business_payments_balance.per_order",data:{balance:t}}),text:""}}return{displayable:d,text:""}};function p(e){var s,n,i,a;return"ManagedBusiness"===(null==e?void 0:e.type)&&(null==e||null===(s=e.managedBusinessProfileAttributes)||void 0===s||null===(n=s.theme)||void 0===n||null===(i=n.logos)||void 0===i||null===(a=i.Large)||void 0===a?void 0:a.url)||""}function y(e,s){return e.find((e=>e.type===a.Hu.Personal&&e.defaultPaymentProfileUuid===s))}function v(e,s){const n=e.find((e=>e.uuid===s));return o(n)?null:n}function f(e,s,n,t,l,p,y,v,f,m,P,b,C,g){let x={text:"",displayable:null};const h={payment:[],mealProgram:null,expenseCode:null},B={message:{text:"",displayable:null},action:null},E=r(s),Z={text:"",displayable:(0,u.tZ)(i.v,{id:"shared.uber_cash_with_balance",data:{balance:d(l)}})};if(f)if(o(e))x.displayable=(0,u.tZ)(i.v,{id:"components.payments_cell.personal"}),n&&h.payment.push(Z),E&&h.payment.push(E),s||(B.message.displayable=(0,u.tZ)(i.v,{id:"shared.addPaymentMethod"}),B.action=m.getPaymentSelectAction());else{if(x.text=(null==e?void 0:e.name)||"",x.displayable=(0,u.tZ)(i.v,{id:"components.payments_cell.business"}),null!=e&&e.isMealProgramRequired){if(null!=p&&p.isExpenseMemoRequired&&P&&(v||(B.message.displayable=(0,u.tZ)(i.v,{id:"shared.add_expense_memo"}),B.action=m.getAddExpenseMemoAction((null==e?void 0:e.uuid)||"",(null==p?void 0:p.uuid)||""))),null!=p&&p.isExpenseCodeRequired&&P&&(null!=y&&y.expenseCode||(B.message.displayable=(0,u.tZ)(i.v,{id:"shared.add_expense_code"}),B.action=m.getAddExpenseCodeAction((null==e?void 0:e.uuid)||"",(null==p?void 0:p.uuid)||""))),g){const s=r(t.find((s=>s.uuid===(null==e?void 0:e.secondaryPaymentProfileUuid))));s?h.payment.push(s):P&&b&&(B.message.displayable=(0,u.tZ)(i.v,{id:"shared.add_secondary_payment_method"}),B.action=m.getAddSecondaryPaymentMethodAction((null==e?void 0:e.uuid)||"",(null==p?void 0:p.uuid)||""))}var U,_,k;if(p){if((null===(U=e.managedBusinessProfileAttributes)||void 0===U?void 0:U.billingMode)!==a.vO.Decentralized||null!==(_=p.components)&&void 0!==_&&_.periodicCapComponent||null!==(k=p.components)&&void 0!==k&&k.perTripCapComponent){const e=c(p,C,!1);e&&(h.mealProgram=e)}}else B.message.displayable=(0,u.tZ)(i.v,{id:"shared.select_meal_program"}),B.action=m.getSelectMealProgramAction((null==e?void 0:e.uuid)||"")}(function(e){var s;return(null==e?void 0:e.type)===a.Hu.Personal||(null==e?void 0:e.type)===a.Hu.Business||(null==e?void 0:e.type)===a.Hu.ManagedBusiness&&(null==e||null===(s=e.managedBusinessProfileAttributes)||void 0===s?void 0:s.billingMode)===a.vO.Decentralized})(e)&&(E?h.payment.push(E):(B.message.displayable=(0,u.tZ)(i.v,{id:"shared.addPaymentMethod"}),B.action=m.getAddPaymentMethodAction((null==e?void 0:e.uuid)||"")))}else n?(x=Z,E&&h.payment.push(E)):x=E||x;return{primary:x,secondary:h,error:B}}function m(e){const s=((null==e?void 0:e.tokenType)||"unknown").toLowerCase();switch(s){case"google":case"google_pay":return t.Z.google;case"paypal":case"uber_test":case"derivative":case"paytm":case"braintree":case"zaakpay":return function(e){const s=(e||"unknown").toLowerCase();switch(s){case"american_express":case"amex":return t.Z["american express"];default:return t.Z[s]||t.Z.unknown}}(null==e?void 0:e.cardType);case"stored_value":return t.Z.uber;case"apple_pay_display":return t.Z.applepay;default:return t.Z[s]||t.Z.unknown}}function P(e){const s=e.find((e=>"Personal"===e.type));return{profileUuid:(null==s?void 0:s.uuid)||"",paymentProfileUuid:(null==s?void 0:s.defaultPaymentProfileUuid)||""}}function b(e,s){const n=s.find((s=>s.uuid===e));return Boolean(n)}function C(e){const s=e.find((e=>"Personal"!==e.type));return{profileUuid:(null==s?void 0:s.uuid)||"",paymentProfileUuid:(null==s?void 0:s.defaultPaymentProfileUuid)||""}}},77630:(e,s,n)=>{"use strict";n.d(s,{Z:()=>a});var i=n(33819);const a={alipay:(0,i.pZ)(n(21344)),"american express":(0,i.pZ)(n(21217)),applepay:(0,i.pZ)(n(36841)),cash:(0,i.pZ)(n(30205)),cc:(0,i.pZ)(n(91801)),diners:(0,i.pZ)(n(50307)),discover:(0,i.pZ)(n(69188)),google:(0,i.pZ)(n(39063)),india:(0,i.pZ)(n(30205)),jcb:(0,i.pZ)(n(9696)),mastercard:(0,i.pZ)(n(71087)),paypal:(0,i.pZ)(n(43415)),paytm:(0,i.pZ)(n(98077)),uber:(0,i.pZ)(n(6831)),unionpay:(0,i.pZ)(n(54039)),unknown:(0,i.pZ)(n(986)),ubertest:(0,i.pZ)(n(6831)),venmo:(0,i.pZ)(n(92851)),visa:(0,i.pZ)(n(56644)),upi:(0,i.pZ)(n(10143)),paypay:(0,i.pZ)(n(84528)),derivative:(0,i.pZ)(n(20921)),vouchers:(0,i.pZ)(n(399)),bancontact:(0,i.pZ)(n(76951))}},41679:(e,s,n)=>{"use strict";n.d(s,{Z:()=>m});var i=n(77808),a=n(32912),t=n(21888),l=n(38370);var u=n(17946),o=n(96557),d=n(39069);function r(e){const[s,n]=(0,i.useState)(null),[a,t]=(0,i.useState)(null),{businessPolicies:l,getBusinessPoliciesForUserFromProfile:r,setBusinessPolicies:c}=function(){const e=(0,u.Z)("getBusinessPoliciesForUserV2"),[s,n]=(0,i.useState)({data:null,error:null,hasLoaded:!1,isLoading:!1});return{businessPolicies:s,getBusinessPoliciesForUserFromProfile:(0,i.useCallback)((s=>{e({profileUuid:s}).then((e=>{n({isLoading:!1,hasLoaded:!0,data:e,error:null})})).catch((e=>{e instanceof o.F||n({isLoading:!1,hasLoaded:!0,data:null,error:e})}))}),[e]),setBusinessPolicies:n}}();return(0,i.useEffect)((()=>{!l.isLoading&&!l.hasLoaded&&null!=s&&s.uuid&&s.type===d.Hu.ManagedBusiness&&e.profileUuid&&r(e.profileUuid)}),[e.profileUuid,l,r,s]),{businessPolicies:l,setBusinessPolicies:c,selectedBusinessProfile:s,selectedBusinessPolicy:a,setSelectedBusinessPolicy:t,setSelectedBusinessProfile:n}}function c(e){const[s,n]=(0,i.useState)(null),{searchBusinessExpenseCodes:a,businessExpenseCodes:t,setBusinessExpenseCodes:l}=function(e){const[s,n]=(0,i.useState)({data:null,error:null,hasLoaded:!1,isLoading:!1}),a=(0,u.Z)("searchBusinessExpenseCodesForUserV1"),t=e=>e?e.trim().toLowerCase():"";return{searchBusinessExpenseCodes:(0,i.useCallback)((i=>{var l,u;let{query:d,resetPageToken:r}=i;n({...s,isLoading:!0});const c=t(d),p=Boolean(s.data&&t(s.data.query)===c);if(p&&r)return void n({...s,isLoading:!1});const y=r?"1":null===(l=s.data)||void 0===l||null===(u=l.paging)||void 0===u?void 0:u.nextPageToken;a({profileUuid:e,pagingInfo:{pageToken:y||"1",limit:25},keyword:c}).then((e=>{var i,a;const t=Number(null===(i=e.paging)||void 0===i?void 0:i.currentPage)>1&&p;n({data:{...e,...t?{expenseCodes:[...(null===(a=s.data)||void 0===a?void 0:a.expenseCodes)||[],...e.expenseCodes||[]]}:null},error:null,hasLoaded:!0,isLoading:!1})})).catch((e=>{e instanceof o.F||n({data:null,error:e,hasLoaded:!0,isLoading:!1})}))}),[s,e,a]),businessExpenseCodes:s,setBusinessExpenseCodes:n}}(e.profileUuid);return(0,i.useEffect)((()=>{!e.profileUuid||!e.policyUuid||null!=t&&t.hasLoaded||t.isLoading||a({query:"",resetPageToken:!0})}),[e.policyUuid,e.profileUuid,t,a]),{businessExpenseCodes:t,searchBusinessExpenseCodes:a,setBusinessExpenseCodes:l,selectedBusinessExpenseCode:s,setSelectedBusinessExpenseCode:n}}var p=n(21830),y=n(76448),v=n(83789),f=n(86087);function m(){var e;const{user:s}=(0,y.Z)(),n=(0,a.TH)(),u=(0,a.k6)(),o=(0,f.ZP)(),m=(0,t.v)((e=>e.checkout)),P=(null==m?void 0:m.selectedBusinessPayment)||null,[b,C]=(0,i.useState)(!1),g=null===(e=s.data)||void 0===e?void 0:e.isLoggedIn,[x,h]=(0,p.Z)("getBusinessProfilesV1"),B=!x.isLoading&&!x.hasLoaded,{params:E,isOnPolicyRoute:Z,isOnSecondaryPaymentRoute:U,isOnExpenseCodeRoute:_,isOnExpenseMemoRoute:k,isOnStartGroupOrder:L}=function(){const e=(0,a.TH)(),{modalContext:s}=(0,l.RAN)(e,["modalContext"]),{modalName:n}=(0,l.RAN)(e,["modalName"]),[i,t]=s.split("|"),u="businessSelectPolicy"===n,o="paymentsSelectSecondaryPaymentProfile"===n,d="businessSelectExpenseCode"===n,r="businessEnterExpenseMemo"===n,c=i&&t?{params:{profileUuid:i,policyUuid:t}}:null,p=u&&i?{params:{profileUuid:i}}:null,y=o?c:null,v=d?c:null,f=r?c:null,m=(0,a.LX)(e.pathname,l.YEU),P=(0,a.LX)(e.pathname,l.gqw),b=Boolean(m)||Boolean(P);return{params:(null==p?void 0:p.params)||(null==y?void 0:y.params)||(null==v?void 0:v.params)||(null==f?void 0:f.params)||(null==m?void 0:m.params)||(null==P?void 0:P.params)||{},isOnPolicyRoute:u,isOnSecondaryPaymentRoute:o,isOnExpenseCodeRoute:d,isOnExpenseMemoRoute:r,isOnStartGroupOrder:b}}(),S=Z||U||_||k,M=E.profileUuid||(null==P?void 0:P.profileUuid)||"",O=(x.data||[]).some((e=>e.type!==d.Hu.Personal)),{businessPolicies:T,setBusinessPolicies:q,selectedBusinessProfile:R,selectedBusinessPolicy:w,setSelectedBusinessPolicy:A,setSelectedBusinessProfile:H}=r({profileUuid:M}),{businessExpenseCodes:D,searchBusinessExpenseCodes:F,setBusinessExpenseCodes:N,selectedBusinessExpenseCode:I,setSelectedBusinessExpenseCode:G}=c({profileUuid:M,policyUuid:E.policyUuid||""}),[z,V]=function(e){const[s,n]=(0,i.useState)(null);return[s,n]}(E.policyUuid),{currentStep:j}=function(e){const[s,n]=(0,i.useState)("PROFILE"),{selectedBusinessPayment:a,selectedBusinessProfile:t,selectedBusinessPolicy:l,selectedBusinessExpenseCode:u,selectedBusinessExpenseMemo:o}=e;return(0,i.useEffect)((()=>{t||n("PROFILE"),t&&!l&&n("POLICY"),t&&l&&null!=t&&t.isMealProgramRequired&&(l.isExpenseCodeRequired||n("COMPLETE"),null!=l&&l.isExpenseCodeRequired&&!u&&n("EXPENSE_CODE"),null!=l&&l.isExpenseCodeRequired&&!l.isExpenseMemoRequired&&u&&n("COMPLETE"),null!=l&&l.isExpenseCodeRequired&&u&&null!=l&&l.isExpenseMemoRequired&&n(o?"COMPLETE":"EXPENSE_MEMO")),null!=a&&a.paymentProfileUuid&&(null==t?void 0:t.type)===d.Hu.Business&&n("COMPLETE")}),[a,t,l,u,o]),{currentStep:s}}({selectedBusinessPayment:P,selectedBusinessProfile:R,selectedBusinessPolicy:w,selectedBusinessExpenseCode:I,selectedBusinessExpenseMemo:z}),X=(0,i.useCallback)((()=>{if(Z)return(0,l.vN_)(n,"paymentsSelectProfile");if(U||_)return T&&T.data&&T.data&&T.data.length>1&&R&&R.uuid?(0,l.vN_)(n,"businessSelectPolicy",R.uuid):(0,l.vN_)(n,"paymentsSelectProfile");if(k){if(w&&R&&R.uuid){const e=w.uuid,s=R.uuid;return(0,l.vN_)(n,"businessSelectExpenseCode","".concat(s,"|").concat(e))}return(0,l.vN_)(n,"paymentsSelectProfile")}return(0,l.C45)(n)}),[T,_,k,U,Z,n,w,R]),Y=(0,i.useCallback)((e=>"group_order"===e?(0,l.Ljk)(n,(0,l.WxO)(E)):(0,l.C45)(n)),[n,E]),K=(0,i.useCallback)((()=>{H(null),V(null),G(null),A(null),q({isLoading:!1,hasLoaded:!1,data:null,error:null}),N({isLoading:!1,hasLoaded:!1,data:null,error:null})}),[N,q,G,V,A,H]),W=(0,i.useCallback)(((e,s)=>{K(),o("eats:business_switch_profile_type",{businessDetails:{parentFlow:s||"checkout"}});const i=(x.data||[]).find((s=>s.uuid===e));if(!x.data||!i)return u.replace(Y(s));if(H(i),!i.isManagedBusiness)return u.replace(Y(s));const a="group_order"===s?(0,l.$m7)(n,(0,l.WxO)(E),e):(0,l.vN_)(n,"businessSelectPolicy",e);return u.replace(a)}),[Y,x.data,u,n,K,H,E,o]),$=(0,i.useCallback)((()=>R?{profileUUID:null==R?void 0:R.uuid,profileType:null==R?void 0:R.type,policyUUID:null==w?void 0:w.uuid,policyVersion:null==w?void 0:w.version,expenseCode:null==I?void 0:I.expenseCode,expenseMemo:z}:{policyUUID:null,profileUUID:null,policyVersion:null,profileType:d.Hu.Personal,expenseCode:null,expenseMemo:null}),[R,w,I,z]);return(0,i.useEffect)((()=>{var e;E.profileUuid&&E.profileUuid!==(null==R?void 0:R.uuid)&&W(E.profileUuid),(Z||L)&&null!=T&&T.hasLoaded&&(null==R?void 0:R.uuid)===E.profileUuid&&1===(null==T||null===(e=T.data)||void 0===e?void 0:e.length)&&A(((null==T?void 0:T.data)||[])[0])}),[T,x,u,Z,n,W,E,R,q,A,L]),(0,i.useEffect)((()=>{g&&B&&h()}),[h,R,g,B]),(0,i.useEffect)((()=>{if(!S&&!R&&x.data&&P&&P.profileUuid&&P.profileUuid!==(null==R?void 0:R.uuid)){const e=(0,v.b6)(x.data,P.profileUuid);H(e)}if(!S&&T.data&&P&&P.policyUuid&&P.policyUuid!==(null==w?void 0:w.uuid)){const e=((null==T?void 0:T.data)||[]).find((e=>e.uuid===P.policyUuid));A(e)}}),[S,P,x.data,H,R,T,A,w]),{businessPolicies:T,shouldGetBusinessProfiles:B,businessProfiles:x,getBusinessProfiles:h,onSelectBusinessProfile:W,setSelectedBusinessProfile:H,hasBusinessProfile:O,selectedBusinessProfile:R,selectedBusinessPolicy:w,setSelectedBusinessPolicy:A,businessExpenseCodes:D,searchBusinessExpenseCodes:F,selectedBusinessExpenseCode:I,setSelectedBusinessExpenseCode:G,selectedBusinessExpenseMemo:z,setSelectedBusinessExpenseMemo:V,requiresProfileFlow:e=>{if(!x.data||!e)return!1;const s=x.data.find((s=>s.uuid===e));return(null==s?void 0:s.type)===d.Hu.ManagedBusiness||(null==s?void 0:s.type)===d.Hu.Business},getBackUrl:X,handleBusinessBackButton:()=>{V(null),G(null),F({query:"",resetPageToken:!0}),(_||Z||U)&&A(null),u.replace(X())},currentStep:j,confirmedProfileSelected:b,setConfirmedProfileSelected:C,getInitialUrl:Y,getBusinessDetails:$}}},42359:(e,s,n)=>{"use strict";n.d(s,{Z:()=>g});var i=n(77808),a=n(21888),t=n(30778),l=n(76448),u=n(86087),o=n(91029),d=n(56182),r=n(74434),c=n(37424),p=n(47348),y=n(50308);function v(e){let{cartCurrencyCode:s,storeCurrencyCode:n}=e;return Boolean(s&&n&&s!==n)}function f(){var e,s,n,a,t,f,m;const{serverCart:P}=(0,o.Z)(),{store:b}=(0,d.Z)(null===(e=P.data)||void 0===e?void 0:e.storeUuid),C=(0,u.ZP)(),{user:g}=(0,l.Z)(),x=null===(s=g.data)||void 0===s?void 0:s.isLoggedIn,h=null===(n=P.data)||void 0===n?void 0:n.cartUuid,B=(null===(a=P.data)||void 0===a?void 0:a.currencyCode)||"",E=null===(t=b.data)||void 0===t?void 0:t.uuid,Z=(null===(f=b.data)||void 0===f?void 0:f.currencyCode)||"";(0,i.useEffect)((()=>{v({cartCurrencyCode:B,storeCurrencyCode:Z})?C("eats:cart__currency_code__mismatch",{cartCurrencyCodeMismatch:{detectionSource:"useGetCreditBalancesHook",cartInfo:{cartUuid:h,currencyCode:B},storeInfo:{storeUuid:E,currencyCode:Z}}}):B&&Z&&C("eats:cart__currency_code__match",{cartCurrencyCodeMismatch:{detectionSource:"useGetCreditBalancesHook",cartInfo:{cartUuid:h,currencyCode:B},storeInfo:{storeUuid:E,currencyCode:Z}}})}),[h,E,B,Z,C]);let U=B;v({cartCurrencyCode:B,storeCurrencyCode:Z})&&(U=Z);const _=function(e,s){const n=(0,i.useContext)(c.GM),a=(0,c.G2)(p.U4).from(n),t={queryKey:(0,y.H)("getCreditBalancesV1",e),queryFn:e=>{let{queryKey:s}=e;return a.request("getCreditBalancesV1",s[1])}};return s&&s.queryObserverOptions&&Object.assign(t,s.queryObserverOptions),(0,r.useQuery)(t)}({currencyCode:U},{queryObserverOptions:{enabled:Boolean(U)&&x}});return{isLoading:_.isLoading,isError:_.isError,getCreditBalances:_.refetch,creditBalances:(null===(m=_.data)||void 0===m?void 0:m.creditBalances)||[]}}var m=n(64592),P=n(39069),b=n(53238),C=n(80542);function g(e){var s;let{businessProfiles:n}=e;const o=(0,t.I0)(),d=(0,u.ZP)(),{user:r}=(0,l.Z)(),{creditBalances:c}=f(),p=(0,a.v)((e=>e.checkout)),{useCredits:y,extraPaymentData:v,selectedPersonalPayment:g}=p||{},[x,h]=(0,i.useState)(null),{shouldUsePaymentsHub:B,paymentsHubProfiles:E,publishableKey:Z,integrationName:U,preferredProfileUUID:_}=(0,C.Z)(),{lastSelectedProfile:k,paymentProfiles:L}=(null===(s=r.data)||void 0===s?void 0:s.paymentProfiles)||{lastSelectedProfile:"",paymentProfiles:[]},S=B&&E?E:L,M=(0,i.useCallback)((e=>S&&e?S.find((s=>s.uuid===e)):null),[S]),O=(0,a.v)((e=>{let{device:s}=e;return s.embeddedApp})),T=M(null==g?void 0:g.uuid),q=(n.data||[]).find((e=>e.defaultPaymentProfileUuid===(null==g?void 0:g.uuid))),R=M(_),w=M(k),A=(null==T?void 0:T.uuid)||(null==R?void 0:R.uuid)||(null==w?void 0:w.uuid),H=(n.data||[]).find((e=>e.type===P.Hu.Personal)),D=M(null==H?void 0:H.defaultPaymentProfileUuid),F=(0,i.useCallback)((e=>{const s=M(e);s&&o((0,m.yG)({uuid:s.uuid}))}),[o,M]);return(0,i.useEffect)((()=>{k.length>0&&!S.includes(k)&&d("eats:payment_hub_last_profile_uuid_miss",{lastProfileUuid:k,webPayments:{key:Z,integrationName:U}})}),[d,U,k,S,Z]),(0,i.useEffect)((()=>{!(0,b.Z)(O)&&R&&o((0,m.yG)({uuid:null==R?void 0:R.uuid}))}),[R,O,o]),(0,i.useEffect)((()=>{if((0,b.Z)(O)){const e=S.find((e=>"paypay"===(null==e?void 0:e.tokenType)));null!=e&&e.uuid&&(null==g?void 0:g.uuid)!==(null==e?void 0:e.uuid)&&o((0,m.yG)({uuid:null==e?void 0:e.uuid}))}else T||q||!g?null!=g&&g.uuid||!(A||null!=D&&D.uuid||S.length>0)||o((0,m.yG)({uuid:(null==T?void 0:T.uuid)||(null==R?void 0:R.uuid)||(null==w?void 0:w.uuid)||(null==D?void 0:D.uuid)||S[0].uuid})):o((0,m.yG)(null))}),[o,w,R,g,T,A,O,M,D,S,q]),{selectedPersonalPayment:T||R||w,updateSelectedPersonalPayment:F,guestPaymentProfile:x,setGuestPaymentProfile:h,extraPaymentData:v,paymentProfiles:S,creditBalances:c,useCredits:y}}},91029:(e,s,n)=>{"use strict";n.d(s,{Z:()=>o});var i=n(17924),a=n(29808),t=n(89642),l=n(83735),u=n(75236);const o=e=>{const s=(0,a.Z)(),n=(0,i.Ah)(s),o=(0,l.Z)(e).cart,d=(0,u.Z)(n);return{serverCart:o,cartData:o.data||t.g0,hasCartToLoad:Boolean(n),hasCartChanged:d!==n}}},75236:(e,s,n)=>{"use strict";n.d(s,{Z:()=>a});var i=n(77808);function a(e){const s=(0,i.useRef)();return(0,i.useEffect)((()=>{s.current=e})),s.current}},39069:(e,s,n)=>{"use strict";n.d(s,{$C:()=>o,Hu:()=>t,TW:()=>a,vO:()=>l,zp:()=>u});var i=n(22079);const a={...i.E,data:[]},t={Personal:"Personal",Business:"Business",ManagedBusiness:"ManagedBusiness",ManagedFamily:"ManagedFamily",Commuter:"Commuter"},l={Centralized:"Centralized",Decentralized:"Decentralized"},u={...i.E,data:[]},o={...i.E,data:{expenseCodes:[],hasMore:!1,query:""}}},76951:(e,s,n)=>{e.exports=n.p+"f93f7c0e3996c021.svg"},30205:(e,s,n)=>{e.exports=n.p+"37053d4d3972ae6d.svg"},21217:(e,s,n)=>{e.exports=n.p+"472475c485d211d4.svg"},50307:(e,s,n)=>{e.exports=n.p+"4dbcffc65086d2a1.svg"},69188:(e,s,n)=>{e.exports=n.p+"298c5d3f9e2f0415.svg"},9696:(e,s,n)=>{e.exports=n.p+"4a8c2b5a0ef3d828.svg"},71087:(e,s,n)=>{e.exports=n.p+"85573f825c72de21.svg"},6831:(e,s,n)=>{e.exports=n.p+"16de2f01b2abfcd4.svg"},56644:(e,s,n)=>{e.exports=n.p+"c57afa92c9773650.svg"},91801:(e,s,n)=>{e.exports=n.p+"a90ee32180aec8e4.svg"},20921:(e,s,n)=>{e.exports=n.p+"0b243493e38d216d.svg"},21344:(e,s,n)=>{e.exports=n.p+"7d599df78947c601.svg"},36841:(e,s,n)=>{e.exports=n.p+"a01e1bb4a6328427.svg"},39063:(e,s,n)=>{e.exports=n.p+"6b22c989b1553e5e.svg"},43415:(e,s,n)=>{e.exports=n.p+"29c3a6a2d4cd40fa.svg"},84528:(e,s,n)=>{e.exports=n.p+"ace8b254555025fb.svg"},98077:(e,s,n)=>{e.exports=n.p+"807d3e39daf4977c.svg"},54039:(e,s,n)=>{e.exports=n.p+"82144546657e40d2.svg"},986:(e,s,n)=>{e.exports=n.p+"155e5c4d6a0dd96b.svg"},10143:(e,s,n)=>{e.exports=n.p+"bd8dd7999964321d.svg"},92851:(e,s,n)=>{e.exports=n.p+"7bcefd4dbe11d684.svg"},399:(e,s,n)=>{e.exports=n.p+"899713dd6dea5932.svg"}}]);