"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[19189],{99923:(e,t,i)=>{i.d(t,{Z:()=>x});var n=i(72436),s=i(14499),a=i(31592),o=i(44470),r=i(30330);const l=(0,n.zo)("ol",{display:"flex",justifyContent:"center",alignItems:"center"}),d=(0,n.zo)("li",(e=>{let{$dotsSize:t=4,$theme:i}=e;return{borderRadius:"50%",width:"".concat(2*t,"px"),height:"".concat(2*t,"px"),margin:"0 3px",background:i.colors.white}}));const c=function(e){return(0,r.tZ)(l,{children:[...Array(e.pages).keys()].map((t=>(0,r.tZ)(d,{$dotsSize:t===e.currentPage?e.dotsSize+2:e.dotsSize,onClick:i=>{i.stopPropagation(),e.onClick(t)}},t)))})};var p=i(18898),u=i(10688),m=i(23619),g=i(31476),h=i(47535);const f=(0,n.zo)("div",{padding:"8px",boxSizing:"border-box",position:"absolute",bottom:0,left:0,right:0,display:"flex",alignItems:"center",justifyContent:"flex-start",overflowY:"hidden",overflowX:"scroll",flexWrap:"nowrap",scrollbarWidth:"none","::-webkit-scrollbar":{display:"none"},boxShadow:"0px -4px 16px rgba(0, 0, 0, 0.12)",scrollBehavior:"smooth",transition:h.pB.default});function S(e){let{currentDisplayIndex:t,slides:i,renderPaginationSlide:n,onClick:s,paginationSlideSize:a}=e;const o=p.useRef(null),l=(0,g.gm)();return p.useEffect((()=>{if(!o.current)return;const e=o.current.scrollWidth;if(t>=3)if("ltr"===l)o.current.scrollLeft=(t-3)*(a+8);else{const i=e-(t-3)*(a+8);o.current.scrollLeft=i}else("ltr"===l&&o.current.scrollLeft>=t*(a+8)||"rtl"===l&&e-o.current.scrollLeft<t*(a+8))&&(o.current.scrollLeft=t*(a+8))}),[t,a,l]),(0,r.tZ)(f,{ref:o,children:(0,r.tZ)(u.Z,{separator:()=>(0,r.tZ)(m.ZP,{$width:"8px"}),children:i.map(((e,i)=>(0,r.tZ)("div",{onClick:()=>s(i),children:n({slide:e,isActive:i===t,index:i})},i)))})})}const v=(0,n.zo)("div",(e=>{let{$height:t,$overflowVisible:i,$disabled:n}=e;return{position:"relative",width:"100%",overflow:i?"visible":"hidden",...t?{height:t}:{},pointerEvents:"".concat(n?"none":"auto")}})),y=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{position:"absolute",bottom:0,width:"100%",padding:"12px 0"}})),w=(0,n.zo)("div",(e=>{let{$dotsBottomPosition:t="16px"}=e;return{bottom:t,position:"absolute",padding:0,margin:"0 auto",width:"100%"}}));function x(e){const{displaySlides:t,displayIndex:i,displayOffset:n,useTransition:l,stopAutoScroll:d,changeDisplaySlide:p,onTransitionEnd:u}=(0,o.Z)({slides:e.slides,pageSize:1,autoScrollInterval:e.autoScrollInterval,onSlidesDisplayed:e.onSlidesDisplayed,initialIndex:e.initialIndex,isInfinite:e.isInfinite,peekAnimation:e.peekAnimation});return 0===e.slides.length?null:1===e.slides.length?(0,r.tZ)(v,{$height:e.height,children:(0,r.tZ)(s.M,{$as:"div",$margin:e.margin,children:e.renderSlide({slide:e.slides[0],carouselSlideProps:{isDummy:!1,isVisible:!0,index:0}})})}):(0,r.BX)(v,{$height:e.height,$overflowVisible:e.overflowVisible,$disabled:e.disabled,children:[(0,r.tZ)(s.Z,{displayIndex:i,displayOffset:n,displaySlides:t,onSwipe:d,renderSlide:e.renderSlide,useTransition:l,onTransitionEnd:()=>{if(u(),"function"==typeof e.onTransitionEnd){const t=e.slides[i];e.onTransitionEnd(i,t)}},changeDisplaySlide:p,margin:e.margin,isInfinite:e.isInfinite}),"regular"===e.dotsType?(0,r.tZ)(w,{$dotsBottomPosition:e.dotsBottomPosition,children:(0,r.tZ)(a.Z,{dotsSize:e.dotsSize,pages:e.slides.length,inversedDotColor:e.inversedDotColor,currentPage:i,fullDots:e.fullDots,onClick:e=>{p({index:e})}})}):null,"large"===e.dotsType?(0,r.tZ)(y,{children:(0,r.tZ)(w,{$dotsBottomPosition:e.dotsBottomPosition,children:(0,r.tZ)(c,{dotsSize:e.dotsSize,pages:e.slides.length,currentPage:i,onClick:e=>{p({index:e})}})})}):null,e.paginationSlideProps?(0,r.tZ)(S,{currentDisplayIndex:i,slides:e.slides,renderPaginationSlide:e.paginationSlideProps.renderPaginationSlide,onClick:e=>p({index:e}),paginationSlideSize:e.paginationSlideProps.slideSize}):null]})}},14499:(e,t,i)=>{i.d(t,{M:()=>m,Z:()=>g});var n=i(18898),s=i(77808),a=i(72436);const o={swipeStart:null,swipeStartY:0,swipeOffset:0,lastSwipeStartTime:0,didLastSwipeStartAsTouch:!1,isSwipe:null};function r(e,t){let{x:i,y:n,timestamp:s}=t,a=e.isSwipe;if(e.swipeStart&&null===a&&s-e.lastSwipeStartTime>60){const t=Math.abs(i-e.swipeStart),s=Math.abs(n-e.swipeStartY);a=t>8&&s<50}return a}function l(e,t){switch(t.type){case"swipe start":return{isSwipe:null,swipeStart:t.x,swipeStartY:t.y,swipeOffset:0,lastSwipeStartTime:t.timestamp,didLastSwipeStartAsTouch:t.isTouch};case"swipe move":if(e.swipeStart){const{x:i,y:n,timestamp:s}=t;return{...e,swipeOffset:t.x-e.swipeStart,isSwipe:r(e,{x:i,y:n,timestamp:s})}}return e;case"swipe end":return o;default:throw new Error}}const d=e=>{e.cancelable&&e.preventDefault()};var c=i(31476),p=i(30330);const u=(0,a.zo)("ol",(e=>({margin:0,padding:0,display:"flex",userSelect:"none",willChange:"transform",...e.$useTransition?{transition:"transform 200ms ease-in-out"}:{}}))),m=(0,a.zo)("li",(e=>{let{$margin:t}=e;return{width:"100%",margin:"0 ".concat(t/2,"px"),flex:"none",display:"flex"}}));function g(e){let{displaySlides:t,renderSlide:i,displayIndex:a,displayOffset:g,useTransition:h,onTransitionEnd:f,onSwipe:S,changeDisplaySlide:v,margin:y,isInfinite:w}=e;const x=(0,s.useRef)(null),b=(0,c.gm)(),I=t.findIndex((e=>{let{displayIndex:t}=e;return t===a}));!function(e){let{swipeTargetRef:t,onSwipeEnd:i,onSwipeMove:n}=e;const a=!0,[c,p]=(0,s.useReducer)(l,o),u=(0,s.useCallback)((e=>{e instanceof TouchEvent&&1!==e.touches.length||p({type:"swipe start",x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,timestamp:e.timeStamp,isTouch:!0})}),[]),m=(0,s.useCallback)((e=>{e.preventDefault(),c.didLastSwipeStartAsTouch&&Math.abs(e.timeStamp-c.lastSwipeStartTime)<200||p({type:"swipe start",x:e.pageX,y:e.pageY,timestamp:e.timeStamp,isTouch:!1})}),[c.didLastSwipeStartAsTouch,c.lastSwipeStartTime]),g=(0,s.useCallback)((e=>{if(e instanceof TouchEvent&&1!==e.touches.length)return;const{x:t,y:i}=e instanceof MouseEvent?{x:e.pageX,y:e.pageY}:{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY};r(c,{x:t,y:i,timestamp:e.timeStamp})&&c.swipeStart&&n(t-c.swipeStart),p({type:"swipe move",x:t,y:i,timestamp:e.timeStamp})}),[c,n]),h=(0,s.useCallback)((e=>{if(e instanceof TouchEvent&&0!==e.touches.length)return;const{x:t,y:n}=e instanceof MouseEvent?{x:e.pageX,y:e.pageY}:{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY};r(c,{x:t,y:n,timestamp:e.timeStamp})&&c.swipeStart&&i(t-c.swipeStart),p({type:"swipe end"})}),[c,i]);(0,s.useEffect)((()=>{const e=Math.abs(c.swipeOffset)>8&&a;return e&&document.addEventListener("touchmove",d,{passive:!1}),()=>{e&&document.removeEventListener("touchmove",d,{passive:!1})}}),[c.swipeOffset,a]),(0,s.useEffect)((()=>{const e=t.current;return e&&(e.addEventListener("touchstart",u,{passive:!0}),e.addEventListener("mousedown",m)),()=>{e&&(e.removeEventListener("touchstart",u,{passive:!0}),e.removeEventListener("mousedown",m))}}),[t,u,m]),(0,s.useEffect)((()=>{const e=t.current;return e&&(e.addEventListener("touchmove",g,{passive:!1}),e.addEventListener("touchend",h,{passive:!0})),()=>{e&&(e.removeEventListener("touchmove",g,{passive:!1}),e.removeEventListener("touchend",h,{passive:!0}))}}),[t,g,h,a]),(0,s.useEffect)((()=>{const e=c.swipeStart&&!c.didLastSwipeStartAsTouch;return e&&(document.addEventListener("mousemove",g),document.addEventListener("mouseup",h)),()=>{e&&(document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",h))}}),[c.swipeStart,c.didLastSwipeStartAsTouch,g,h])}({swipeTargetRef:x,onSwipeMove:(0,s.useCallback)((e=>{const i=0===a?1:-1,n=(a===t.length-1&&e<0||0===a&&e>0)&&!w,s=Math.abs(e)>40?40*i:e;v({index:a,offset:n?s:e,useTransition:!1}),S&&S()}),[a,v,S,t.length,w]),onSwipeEnd:(0,s.useCallback)((e=>{Math.abs(e)<40?v({index:a,offset:0}):e<0?v({index:"ltr"===b?"forward":"back"}):e>0&&v({index:"ltr"===b?"back":"forward"})}),[a,v,b])});const T=n.useMemo((()=>t.map(((e,t)=>{let{slide:n,displayIndex:s,isDummy:o}=e;return(0,p.tZ)(m,{"aria-hidden":!!o||void 0,$margin:y,children:i({slide:n,carouselSlideProps:{isDummy:o,isVisible:s===a,index:t}})},s)}))),[i,t,a,y]),P="ltr"===b?-1:1;return(0,p.tZ)(u,{$useTransition:h,style:{transform:"translateX(".concat(I*P*100,"%)")+" "+"translateX(".concat(g,"px)")+"translateX(".concat(I*P*y+P*y/2,"px)")},ref:x,onTransitionEnd:f,children:T})}},19189:(e,t,i)=>{i.d(t,{Z:()=>x});var n=i(90518),s=i(99923),a=i(83296);const o=(e,t)=>({CARD:{getContentPadding:()=>({padding:"12px 16px"}),getTitleFont:e=>{let{$theme:i,$fontSizeLevel:n=2}=e;switch(t){case"REGULAR":return 1===n?{...i.typography.DisplayBold5XSmall,lineHeight:"22px",fontSize:"18px"}:{...i.typography.DisplayBold4XSmall,lineHeight:"28px"};default:return 1===n?{...i.typography.LabelXSmall}:{...i.typography.LabelMedium}}},getSubtitleFont:e=>{let{$theme:t}=e;return{...t.typography.ParagraphXSmall}},getCtaFont:e=>{let{$theme:t}=e;return{...t.typography.LabelXSmall,padding:"4px 8px"}},getLayoutSize:()=>{switch(t){case"REGULAR":return{minHeight:"".concat(n.lC,"px"),cardAspectRatio:"".concat(100*n.Jh,"%"),splitImageAspectRatio:"".concat(100*n.Bu,"%"),splitImageFit:"cover",spacer:"2px"};default:return{minHeight:"".concat(n.PO,"px"),cardAspectRatio:"".concat(100*n.Kk,"%"),splitImageAspectRatio:"".concat(100*n.eo,"%"),splitImageFit:"cover",spacer:"2px"}}}}});var r=i(19229),l=i(2758),d=i(52090),c=i(78895),p=i(38249),u=i(30330);const m=e=>{let{surface:t,template:i,verticalPosition:n,filteredItems:s}=e;return function(e){let{slide:r,carouselSlideProps:l}=e;return(0,u.tZ)(a.Z,{slide:r,slides:s,surface:t,template:i,verticalPosition:n,carouselSlideProps:l,eaterMessageStyles:o(0,i)})}},g=e=>{var t,i;const{cardCarousel:a,surface:o,verticalPosition:g}=e,h=(0,d.S)("durationMetadata"===(null===(t=a.metadata)||void 0===t||null===(i=t.messagePayloadMetadata)||void 0===i?void 0:i.type)?a.metadata.messagePayloadMetadata.durationMetadata:null),f=a.carouselItems||[],{filteredItems:S,initialIndex:v,onSlidesDisplayed:y}=(0,r.Z)(f,o,g),w=(0,c.ip)({...p.J.eats_web_billboard_enable_autoscroll,defaultValue:!1});if(0===S.length)return null;const x=a.template||"";return(0,u.tZ)(l.K2,{children:(0,u.tZ)(l.qY,{$centerPadding:n.Ub,children:(0,u.tZ)(s.Z,{autoScrollInterval:1===S.length?0:w&&"HOME_FEED_ITEM"===o?h||4e3:0,initialIndex:v,slides:S,renderSlide:m({surface:o,template:x,verticalPosition:g,filteredItems:S}),onSlidesDisplayed:y,margin:1===S.length?0:n.yf,dotsType:"disabled",overflowVisible:!0})})})};var h=i(18898),f=i(77808),S=i(86087),v=i(72559),y=i(89974);const w=e=>{var t;const{cardItem:i,surface:n,verticalPosition:s}=e,a=i.cardItem,[o,r]=(0,f.useState)(!1),l=(0,S.ZP)(),d=(null===(t=i.metadata)||void 0===t?void 0:t.trackingID)||"";h.useEffect((()=>{l("eats:eater_message_view",{eaterMessage:{uuid:i.uuid||"",position:0,verticalPosition:s,surface:n,itemType:"cardItemPayload",trackingID:d}})}),[l,i.uuid,n,d,s]);const c=e=>{e.stopPropagation(),e.preventDefault(),r(!0),l("eats:eater_message_dismiss",{eaterMessage:{uuid:i.uuid||"",position:0,verticalPosition:s,surface:n,itemType:"cardItemPayload",trackingID:d}})};switch(null==a?void 0:a.type){case"systemBanner":{var p;if(o)return null;const e=a.systemBanner;return null!==(p=e.cta)&&void 0!==p&&p.action?(0,u.tZ)(v.Z,{linkStyleType:"BANNER",action:e.cta.action,actionTrackingID:e.cta.trackingID||"",surface:n,analytics:{uuid:i.uuid||"",position:0,verticalPosition:s,itemType:"cardItemPayload",trackingID:d,template:""},children:(0,u.tZ)(y.Z,{dismissAction:c,systemBanner:e,systemBannerStyles:{getContentPadding:()=>({padding:"16px"})}})}):(0,u.tZ)(y.Z,{dismissAction:c,systemBanner:e,systemBannerStyles:{getContentPadding:()=>({padding:"16px"})}})}}return null},x=e=>{let{eaterMessage:t,feedIndex:i=0}=e;const{payload:n,surfaceId:s}=t;if(!n)return null;let a=null;switch(n.type){case"cardCarousel":a=(0,u.tZ)(g,{cardCarousel:n.cardCarousel,surface:s||"",verticalPosition:i});break;case"cardItemPayload":a=(0,u.tZ)(w,{cardItem:n.cardItemPayload,surface:s||"",verticalPosition:i})}return a?(0,u.tZ)(u.HY,{children:a}):null}}}]);